import{c as e,Q as o,al as l,o as a,d as t,r as u,I as i,a as r,w as n,H as d,a5 as s,u as c,P as p,M as m,m as f,K as b,au as k}from"./@vue-CCr-0yiD.js";import{c as v,a as g}from"./vue-router-KFoQBlUH.js";import{c as y,a as _}from"./@reduxjs-HFSb0cvX.js";import{E as h,a as B,i as V}from"./element-plus-XS2emjj-.js";import{Q as D}from"./@element-plus-Cmx-uCfU.js";import"./redux-WGC0JRcm.js";import"./immer-RzyHk_vK.js";import"./redux-thunk-B3S1iNVp.js";import"./lodash-es-D2DQyxUg.js";import"./@vueuse-lwpVZXSL.js";import"./@popperjs-CT_jBSb5.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-XTTl_L6l.js";import"./async-validator-DJtlKCAR.js";import"./memoize-one-BAtLgO95.js";import"./normalize-wheel-es-BhHBPXsK.js";import"./@floating-ui-DoFG930S.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)}).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();const j=(e,o)=>{const l=e.__vccOpts||e;for(const[a,t]of o)l[a]=t;return l},w={id:"app"};const x=j({},[["render",function(t,u){const i=l("router-view");return a(),e("div",w,[o(i)])}]]),N={class:"container"},C=j(t({__name:"Home",setup(t){const n=u("BookList"),d=e=>{n.value=e};return(t,u)=>{const s=l("el-menu-item"),c=l("el-menu"),p=l("el-aside"),m=l("router-view"),f=l("el-main"),b=l("el-container");return a(),e("div",N,[o(b,{class:"container-content"},{default:i(()=>[o(p,{class:"aside"},{default:i(()=>[u[1]||(u[1]=r("div",{class:"logo-contaniner"},[r("img",{src:"/assets/png/logo-C5VeJyD0.png",alt:"logo",class:"logo-img"})],-1)),o(c,{"default-active":n.value,onSelect:d},{default:i(()=>[o(s,{index:"BookList"},{default:i(()=>[...u[0]||(u[0]=[r("span",null,"书籍列表",-1)])]),_:1})]),_:1},8,["default-active"])]),_:1}),o(b,{class:"container-content"},{default:i(()=>[o(f,{class:"main"},{default:i(()=>[o(m)]),_:1})]),_:1})]),_:1})])}}}),[["__scopeId","data-v-066dfbe8"]]),L=u([{label:"小说",value:"小说"},{label:"儿童读物",value:"儿童读物"},{label:"非小说类",value:"非小说类"},{label:"专业书",value:"专业书"},{label:"工具书",value:"工具书"},{label:"手册",value:"手册"},{label:"剧本",value:"剧本"},{label:"日记",value:"日记"},{label:"书集",value:"书集"},{label:"摄影绘画集",value:"摄影绘画集"}]),S=u([{id:0,bookName:"《西游记》",bookDesc:"中国古代最著名的小说",price:100,category:"小说"},{id:1,bookName:"《红楼梦》",bookDesc:"中国古代最著名的小说",price:100,category:"小说"},{id:2,bookName:"《三国演义》",bookDesc:"中国古代最著名的小说",price:100,category:"小说"},{id:3,bookName:"《水浒传》",bookDesc:"中国古代最著名的小说",price:100,category:"小说"},{id:4,bookName:"《C++程序设计》",bookDesc:"中国古代最著名的小说",price:100,category:"专业书"},{id:5,bookName:"《计算机组成原理》",bookDesc:"中国古代最著名的小说",price:100,category:"专业书"}]),U=t({__name:"addBook",props:{addBookDialogVisible:{type:Boolean,default:!1}},emits:["addBook","closeDialog"],setup(t,{emit:f}){const b=t,k=u({id:0,bookName:"",bookDesc:"",price:0,category:""}),v=f,g=u(!1);n(()=>b.addBookDialogVisible,e=>{g.value=e});const y=()=>{k.value={id:0,bookName:"",bookDesc:"",price:0,category:""},v("closeDialog")};return(t,u)=>{const n=l("el-input"),f=l("el-form-item"),b=l("el-option"),_=l("el-select"),h=l("el-form"),B=l("el-button"),V=l("el-dialog");return a(),d(V,{title:"书籍详情",modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=e=>g.value=e),width:"50%",onClose:y},{footer:i(()=>[r("div",null,[o(B,{onClick:y},{default:i(()=>[...u[6]||(u[6]=[m("取消",-1)])]),_:1}),o(B,{type:"primary",onClick:u[4]||(u[4]=e=>(v("addBook",k.value),void y()))},{default:i(()=>[...u[7]||(u[7]=[m(" 确定 ",-1)])]),_:1})])]),default:i(()=>[o(h,{ref:"ruleFormRef",style:{"max-width":"600px"},model:k.value,"status-icon":"","label-width":"auto"},{default:i(()=>[o(f,{label:"书籍名称",prop:"bookName"},{default:i(()=>[o(n,{modelValue:k.value.bookName,"onUpdate:modelValue":u[0]||(u[0]=e=>k.value.bookName=e),autocomplete:"off",placeholder:"请输入书籍名称"},null,8,["modelValue"])]),_:1}),o(f,{label:"书籍描述",prop:"bookDesc"},{default:i(()=>[o(n,{modelValue:k.value.bookDesc,"onUpdate:modelValue":u[1]||(u[1]=e=>k.value.bookDesc=e),autocomplete:"off",placeholder:"请输入书籍描述"},null,8,["modelValue"])]),_:1}),o(f,{label:"书籍分类",prop:"category"},{default:i(()=>[o(_,{modelValue:k.value.category,"onUpdate:modelValue":u[2]||(u[2]=e=>k.value.category=e),placeholder:"请选择书籍分类"},{default:i(()=>[(a(!0),e(p,null,s(c(L),e=>(a(),d(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"书籍价格",prop:"price"},{default:i(()=>[o(n,{modelValue:k.value.price,"onUpdate:modelValue":u[3]||(u[3]=e=>k.value.price=e),autocomplete:"off",placeholder:"请输入书籍价格(元)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),O=e=>{if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const o=[];for(let l=0;l<e.length;l++)o[l]=O(e[l]);return o}if("object"==typeof e){const o={};for(const l in e)e.hasOwnProperty(l)&&(o[l]=O(e[l]));return o}return e},z=t({__name:"editBook",props:{editBookList:{type:Object,default:()=>({bookName:"",bookDesc:"",price:0,category:""})},editBookVisible:{type:Boolean,default:!1}},emits:["closeDialog","editBook"],setup(t,{emit:f}){const b=t,k=f,v=u({id:0,bookName:"",bookDesc:"",price:0,category:""}),g=u(!1);n(()=>b.editBookVisible,e=>{g.value=e,v.value=O(b.editBookList)});const y=()=>{console.log("关闭弹窗"),k("closeDialog")};return(t,u)=>{const n=l("el-input"),f=l("el-form-item"),b=l("el-option"),_=l("el-select"),h=l("el-form"),B=l("el-button"),V=l("el-dialog");return a(),d(V,{title:"书籍详情",modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=e=>g.value=e),width:"50%",onClose:y},{footer:i(()=>[r("div",null,[o(B,{onClick:y},{default:i(()=>[...u[6]||(u[6]=[m("取消",-1)])]),_:1}),o(B,{type:"primary",onClick:u[4]||(u[4]=e=>(console.log("editbook编辑后的书籍:",v.value),void k("editBook",v.value)))},{default:i(()=>[...u[7]||(u[7]=[m(" 确定修改 ",-1)])]),_:1})])]),default:i(()=>[o(h,{ref:"ruleFormRef",style:{"max-width":"600px"},model:v.value,"status-icon":"","label-width":"auto"},{default:i(()=>[o(f,{label:"书籍名称",prop:"bookName"},{default:i(()=>[o(n,{modelValue:v.value.bookName,"onUpdate:modelValue":u[0]||(u[0]=e=>v.value.bookName=e),autocomplete:"off",placeholder:"请输入书籍名称"},null,8,["modelValue"])]),_:1}),o(f,{label:"书籍描述",prop:"bookDesc"},{default:i(()=>[o(n,{modelValue:v.value.bookDesc,"onUpdate:modelValue":u[1]||(u[1]=e=>v.value.bookDesc=e),autocomplete:"off",placeholder:"请输入书籍描述"},null,8,["modelValue"])]),_:1}),o(f,{label:"书籍分类",prop:"category"},{default:i(()=>[o(_,{modelValue:v.value.category,"onUpdate:modelValue":u[2]||(u[2]=e=>v.value.category=e),placeholder:"请选择书籍分类"},{default:i(()=>[(a(!0),e(p,null,s(c(L),e=>(a(),d(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"书籍价格",prop:"price"},{default:i(()=>[o(n,{modelValue:v.value.price,"onUpdate:modelValue":u[3]||(u[3]=e=>v.value.price=e),autocomplete:"off",placeholder:"请输入书籍价格(元)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),I=y({name:"book",initialState:S.value,reducers:{addBook:(e,o)=>{const l={...o.payload,id:e.length>0?Math.max(...e.map(e=>e.id))+1:0};e.push(l)},deleteBook:(e,o)=>{const l=e.findIndex(e=>e.id===o.payload);-1!==l&&e.splice(l,1)},deleteSelectedBooks:(e,o)=>{},editBook:(e,o)=>{console.log(o.payload);const l=e.findIndex(e=>e.id===o.payload.id);console.log(l),-1!==l&&(e[l]={...e[l],...o.payload},console.log(e[l]))},updateRoute:(e,o)=>{}}}),{addBook:P,deleteBook:A,deleteSelectedBooks:E,updateRoute:T,editBook:R}=I.actions,F=_({reducer:{book:I.reducer}}),H=j(t({__name:"bookList",setup(t){const r=u([]);f(()=>{r.value=F.getState().book});const n=u(!1),s=u(!1),c=e=>{F.dispatch(P(e)),r.value=F.getState().book,h.success("添加成功"),k()},k=()=>{s.value=!1,n.value=!1},v=()=>{n.value=!0},g=u([]),y=u(),_=e=>{F.dispatch(R(e)),r.value=F.getState().book,h.success("编辑成功"),k()},V=e=>{g.value=e},D=()=>{B.confirm("确定删除选中的书籍吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{g.value.forEach(e=>{F.dispatch(A(e.id))}),r.value=F.getState().book,h.success("删除成功")})};return(t,u)=>{const f=l("Plus"),j=l("el-icon"),w=l("el-button"),x=l("DeleteFilled"),N=l("el-tooltip"),C=l("el-table-column"),L=l("Edit"),S=l("el-table"),I=l("el-card");return a(),e(p,null,[o(I,{style:{"max-width":"100%","text-align":"left"}},{header:i(()=>[o(w,{type:"primary",class:"-m-2",onClick:v},{default:i(()=>[o(j,null,{default:i(()=>[o(f)]),_:1}),u[0]||(u[0]=m(" 添加书籍 ",-1))]),_:1}),g.value.length>1?(a(),d(N,{key:0,content:"删除",placement:"top"},{default:i(()=>[o(w,{type:"danger",onClick:D},{default:i(()=>[o(j,null,{default:i(()=>[o(x)]),_:1})]),_:1})]),_:1})):b("",!0)]),default:i(()=>[o(S,{data:r.value,style:{width:"100%"},"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},onSelectionChange:V,"default-sort":{prop:"category",order:"descending"}},{default:i(()=>[o(C,{type:"selection",width:"55"}),o(C,{prop:"bookName",label:"书籍名称",resizable:!1}),o(C,{prop:"bookDesc",label:"书籍描述",resizable:!1}),o(C,{prop:"category",label:"书籍分类",resizable:!1,sortable:""}),o(C,{prop:"price",label:"书籍价格",resizable:!1}),o(C,{label:"操作"},{default:i(e=>[o(N,{content:"编辑",placement:"top"},{default:i(()=>[o(w,{type:"primary",onClick:o=>{return l=e.row,y.value=O(l),void(s.value=!0);var l}},{default:i(()=>[o(j,null,{default:i(()=>[o(L)]),_:1})]),_:1},8,["onClick"])]),_:2},1024),o(N,{content:"删除",placement:"top"},{default:i(()=>[o(w,{type:"danger",onClick:o=>{return e.$index,l=e.row,void B.confirm("确定删除吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{F.dispatch(A(l.id)),r.value=F.getState().book,h.success("删除成功")});var l}},{default:i(()=>[o(j,null,{default:i(()=>[o(x)]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),o(U,{addBookDialogVisible:n.value,onAddBook:c,onCloseDialog:k},null,8,["addBookDialogVisible"]),o(z,{editBookVisible:s.value,onEditBook:_,onCloseDialog:k,editBookList:y.value},null,8,["editBookVisible","editBookList"])],64)}}}),[["__scopeId","data-v-7f42349a"]]),M=v({history:g(),routes:[{path:"/",name:"Home",component:C,redirect:"/BookList",children:[{path:"/BookList",name:"BookList",component:H}]}]}),K=k(x);for(const[Q,q]of Object.entries(D))K.component(Q,q);K.use(V),K.use(M),K.mount("#app");
